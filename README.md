# e2e test coverage 

There are many great test reporting tools that allow you to get an overview of automated test runs.

But from my point of view, they lack an overview of which product area is covered with automated tests with the respective test status. Or at least I haven't found one. 

**e2e test coverage** allows to define a product overview with the different areas and the features for each area and to upload test results.

In the automated tests, the same identifiers must then be used for the areas and functions so that mapping can take place. The results of the automatic tests can be uploaded via a rest endpoint. Currently "only" Mocha reports are supported.

In the coverage display, **e2e test coverage** takes into account the last 28 days. 

Of course, this is only a quantitative view and does not make any statement about the quality of the tests. But from my point of view it is still helpful to have such an overview.

In addition to displaying the test coverage, **e2e test coverage** also allows to collect feedback from exploratory tests.

# Installation
* Download the binary matching the operating system.
* **e2e test coverage** needs a MySQL database. The DB connection is configured in the ```db.env``` file. This file is stored in the same directory as the binary.

  Example:
  ```
  DB_USER = "root"
  DB_PASSWORD = "root"
  DB_HOST = "127.0.0.1:3306"
  DB_NAME   = "e2ecoverage"
  ```
* Run ```e2e-coverage```

  This starts **e2e test coverage** on port 8080. 

# Guide 
* Open **e2e test coverage** URL in the browser
* Select _Product_ and enter a product name
* Add areas and features to the product
* Adapt the test files of your test automation to have a title with this build-up: ```{area name}|{feature name}|{suite name}```, e.g. for Cypress Tests ```describe('{area name}|{feature name}|{suite name}', () => {```
* Upload the mocha report using the REST API endpoint (directly from the CI/CD pipeline)

  Example:
  ```curl -d @mocha-report1_1.json http://localhost:8080/api/v1/coverage/1/upload-mocha-report```
* Explore the _Coverage_ section
* Start logging exploratory tests by clicking on _Log new_

# Development
Please bear with me, this is my first Golang & Vue3 project.

Project developed with Golang 1.19, Vue 3, and Bootstrap 5.

## Folder Structure
* cmd/coverage > Main Application
* docs > API Doc generated by Swag
* pkg/controller > Implementation of API endpoints
* pkg/model > Model of different structures
* pkg/reporter > Files to import tests, currently only Mocha is implemented
* pkg/reposiutory > DB access
* pkg/router > Route to the different endpoints
* ui > Vue 3 application

## Build project

### Development
Call ```go run cmd/coverage/main.go``` to start the server, including UI.

The Vue 3 app can be started with ```npm run serve``` from the ```ui``` directory and is available on port 8081.

### Production
Call ```make build``` to create the binaries. This build the Vue 3 app and embeds this in the binary and the Swagger doc will also be created and included.


# Further Ideas
- [ ] Allow to re-order areas and features
- [ ] Create area + feature automatically when uploading reports
- [ ] Allow to add bugs in production (Ticket Number, Short Desc, severity). Or better: get this automatically
- [ ] Allow to upload a Mocha summary file
- [ ] Allow to use more than one product / maintain products
- [ ] Security
- [ ] Login
- [ ] Include SLA data, e.g. from Datadog